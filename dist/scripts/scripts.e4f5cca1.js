"use strict";angular.module("mapGuruApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/game",{templateUrl:"views/game.html",controller:"GameCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).otherwise({redirectTo:"/about"})}]).controller("HeaderCtrl"),angular.module("mapGuruApp").controller("GameCtrl",["$scope",function(a){function b(){a.points={correctAnswers:0,wrongAnswers:0},a.answerWrong=null,a.answerCorrect=null,a.myLocation={longitude:0,latitude:0},a.mapList=g()}function c(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(b){a.$apply(function(){a.myLocation={longitude:b.coords.longitude,latitude:b.coords.latitude}})})}function d(a,b,c,d){var f=6371,g=e(c-a),h=e(d-b),i=Math.sin(g/2)*Math.sin(g/2)+Math.cos(e(a))*Math.cos(e(c))*Math.sin(h/2)*Math.sin(h/2),j=2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)),k=f*j;return k}function e(a){return a*(Math.PI/180)}function f(a,b,c){return 1*(Math.random()*(b-a)+a).toFixed(c)}function g(){var b=[];a.nearestDistance=41e3;for(var c=0;5>c;c++){var e=f(0,90,3),g=f(-140,180,3),h=d(e,g,a.myLocation.latitude,a.myLocation.longitude);h<a.nearestDistance&&(a.nearestDistance=h);var i={index:c,distanceFromMe:h,latitude:e,longitude:g,path:"https://maps.googleapis.com/maps/api/staticmap?center="+e+","+g+"&zoom=10&size=400x400&maptype=roadmap"};b.push(i)}return b}c(),b(),a.setPlayerName=function(){a.playerNameSet=!0},a.resetGame=function(){b()},a.resetPlayerName=function(){a.playerNameSet=!1,a.playerName="",b()},a.resetGeolocation=function(){c()},a.triggerNewMapSet=function(){a.mapList=g()},a.isThisClosest=function(b){console.log(b,a.nearestDistance),b===a.nearestDistance?(a.points.correctAnswers+=1,a.answerWrong=!1,a.answerCorrect=!0):(a.points.wrongAnswers+=1,a.answerWrong=!0,a.answerCorrect=!1),a.mapList=g()}}]),angular.module("mapGuruApp").controller("AboutCtrl",["$scope",function(){}]),angular.module("mapGuruApp").controller("HeaderCtrl",["$scope","$location",function(a,b){a.isActive=function(a){return a===b.path()}}]);